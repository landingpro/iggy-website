"use strict";(self.webpackChunkiggy_website=self.webpackChunkiggy_website||[]).push([[1335],{966:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/bench_cli-02b0d7bd13656d700fbdf1c76ae76fa3.png"},2415:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/bench_platform-dad3f0256bec6e556b40ea798366b7fe.png"},7539:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>c,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"server/server-benchmarking","title":"Benchmarking","description":"Benchmarks should be the first-class citizens. We believe that performance is crucial for any system, and we strive to provide the best possible performance for our users. Please check, why we believe that the transparent benchmarking is so important.","source":"@site/docs/server/benchmarking.md","sourceDirName":"server","slug":"/server/benchmarking","permalink":"/docs/server/benchmarking","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"server-benchmarking","slug":"/server/benchmarking","title":"Benchmarking","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Schema","permalink":"/docs/server/schema"},"next":{"title":"Intro","permalink":"/docs/sdk/csharp/intro"}}');var i=r(4848),t=r(8453);const c={id:"server-benchmarking",slug:"/server/benchmarking",title:"Benchmarking",sidebar_position:5},a=void 0,o={},h=[];function l(e){const n={a:"a",code:"code",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Benchmarks should be the first-class citizens"}),". We believe that performance is crucial for any system, and we strive to provide the best possible performance for our users. Please check, why we believe that the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://iggy.apache.org/blogs/2025/02/17/transparent-benchmarks",children:"transparent benchmarking"})})," is so important."]}),"\n",(0,i.jsxs)(n.p,{children:["We've also built the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://benchmarks.iggy.rs",children:"benchmarking platform"})})," where anyone can upload the benchmarks and compare the results with others. This is the another open-source project available ",(0,i.jsx)(n.a,{href:"https://github.com/iggy-rs/iggy-bench-dashboard",children:"here"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Benchmarking Platform",src:r(2415).A+"",width:"2048",height:"1255"})}),"\n",(0,i.jsxs)(n.p,{children:["Iggy comes with a built-in benchmarking tool ",(0,i.jsx)(n.code,{children:"iggy-bench"})," that allows you to measure the performance of the server. It is written in Rust and uses the ",(0,i.jsx)(n.code,{children:"tokio"})," runtime for asynchronous I/O operations mimicking the example client applications.  The tool is designed to be as close to real-world scenarios as possible, so you can use it to estimate the performance of the server in your environment. It is part of the ",(0,i.jsx)(n.a,{href:"https://github.com/apache/iggy/tree/master/core/bench",children:"core repository"})," and can be found in the ",(0,i.jsx)(n.code,{children:"bench"})," directory."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Bench CLI",src:r(966).A+"",width:"2048",height:"1079"})}),"\n",(0,i.jsx)(n.p,{children:"To benchmark the project, first build the project in release mode:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo build --release\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then, run the benchmarking app with the desired options:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Sending (writing) benchmark"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo r --bin iggy-bench -r -- -v pinned-producer tcp\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Polling (reading) benchmark"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo r --bin iggy-bench -r -- -v pinned-consumer tcp\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Parallel sending and polling benchmark"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo r --bin iggy-bench -r -- -v pinned-producer-and-consumer tcp\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Balanced sending to multiple partitions benchmark"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo r --bin iggy-bench -r -- -v balanced-producer tcp\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Consumer group polling benchmark:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo r --bin iggy-bench -r -- -v balanced-consumer-group tcp\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Parallel balanced sending and polling from consumer group benchmark:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo r --bin iggy-bench -r -- -v balanced-producer-and-consumer-group tcp\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"End to end producing and consuming benchmark (single task produces and consumes messages in sequence):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo r --bin iggy-bench -r -- -v end-to-end-producing-consumer tcp\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["These benchmarks would start the server with the default configuration, create a stream, topic and partition, and then send or poll the messages. The default configuration is optimized for the best performance, so you might want to tweak it for your needs. If you need more options, please refer to ",(0,i.jsx)(n.code,{children:"iggy-bench"})," subcommands ",(0,i.jsx)(n.code,{children:"help"})," and ",(0,i.jsx)(n.code,{children:"examples"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, to run the benchmark for the already started server, provide the additional argument ",(0,i.jsx)(n.code,{children:"--server-address 0.0.0.0:8090"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Depending on the hardware, transport protocol (",(0,i.jsx)(n.code,{children:"quic"}),", ",(0,i.jsx)(n.code,{children:"tcp"})," or ",(0,i.jsx)(n.code,{children:"http"}),") and payload size (",(0,i.jsx)(n.code,{children:"messages-per-batch * message-size"}),") you might expect ",(0,i.jsx)(n.strong,{children:"over 5000 MB/s (e.g. 5M of 1 KB msg/sec) throughput for writes and reads"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Iggy is already capable of processing millions of messages per second at the microseconds range for p99+ latency"}),", and with the upcoming optimizations related to the io_uring support along with the shared-nothing design, it will only get better."]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>a});var s=r(6540);const i={},t=s.createContext(i);function c(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);