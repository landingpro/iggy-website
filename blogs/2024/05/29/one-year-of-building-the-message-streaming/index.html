<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Iggy.rs — one year of building the message streaming | Hyper-Efficient Message Streaming at Laser Speed.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://iggy.apache.org/img//apache-iggy-light-bg0.5x.png"><meta data-rh="true" name="twitter:image" content="https://iggy.apache.org/img//apache-iggy-light-bg0.5x.png"><meta data-rh="true" property="og:url" content="https://iggy.apache.org/blogs/2024/05/29/one-year-of-building-the-message-streaming"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Iggy.rs — one year of building the message streaming | Hyper-Efficient Message Streaming at Laser Speed."><meta data-rh="true" name="description" content="Throwback"><meta data-rh="true" property="og:description" content="Throwback"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-05-29T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/spetz"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://iggy.apache.org/blogs/2024/05/29/one-year-of-building-the-message-streaming"><link data-rh="true" rel="alternate" href="https://iggy.apache.org/blogs/2024/05/29/one-year-of-building-the-message-streaming" hreflang="en"><link data-rh="true" rel="alternate" href="https://iggy.apache.org/blogs/2024/05/29/one-year-of-building-the-message-streaming" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://iggy.apache.org/blogs/2024/05/29/one-year-of-building-the-message-streaming","mainEntityOfPage":"https://iggy.apache.org/blogs/2024/05/29/one-year-of-building-the-message-streaming","url":"https://iggy.apache.org/blogs/2024/05/29/one-year-of-building-the-message-streaming","headline":"Iggy.rs — one year of building the message streaming","name":"Iggy.rs — one year of building the message streaming","description":"Throwback","datePublished":"2024-05-29T00:00:00.000Z","author":{"@type":"Person","name":"Piotr Gankiewicz","description":"Apache Iggy founder","url":"https://github.com/spetz"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://iggy.apache.org/blogs","name":"Blogs"}}</script><link rel="alternate" type="application/rss+xml" href="/blogs/rss.xml" title="Hyper-Efficient Message Streaming at Laser Speed. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blogs/atom.xml" title="Hyper-Efficient Message Streaming at Laser Speed. Atom Feed"><link rel="stylesheet" href="/assets/css/styles.00ae354b.css">
<script src="/assets/js/runtime~main.e3e00cf3.js" defer="defer"></script>
<script src="/assets/js/main.c8167fb7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/apache-iggy0.5x.png"><link rel="preload" as="image" href="/img/apache-iggy-light-bg0.5x.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/apache-iggy0.5x.png" alt="Apache Iggy" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/apache-iggy-light-bg0.5x.png" alt="Apache Iggy" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blogs">Blogs</a><a class="navbar__item navbar__link" href="/downloads">Downloads</a><a href="https://benchmarks.iggy.rs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Benchmarks<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/C5Sux5NcRa" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://forms.gle/MAd1GjpPwCjwdEp58" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Feedback<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apache/iggy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub ⭐ 2.8K<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2025/06/06/connectors-runtime">Connectors runtime</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2025/05/08/zero-copy-deserialization">Zero-copy (de)serialization</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2025/02/17/transparent-benchmarks">Transparent Benchmarking with Apache Iggy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2025/02/10/apache-incubator">Iggy joins the Apache Incubator</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2024/10/28/technology-radar-and-currrent-goals">Iggy.rs - Technology Radar &amp; current goals</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Iggy.rs — one year of building the message streaming</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-05-29T00:00:00.000Z">May 29, 2024</time> · <!-- -->11 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/spetz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Piotr Gankiewicz</span></a></div><small class="authorTitle_nd0D" title="Apache Iggy founder">Apache Iggy founder</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="throwback">Throwback<a href="#throwback" class="hash-link" aria-label="Direct link to Throwback" title="Direct link to Throwback">​</a></h2>
<p><strong>It&#x27;s been a little over a year</strong>, since the <a href="https://iggy.rs" target="_blank" rel="noopener noreferrer">Iggy.rs</a> was born. The initial idea of building a side project (as a way of studying Rust) — an infrastructure for the message streaming (think of Kafka, RedPanda, Aeron etc.) — eventually turned out to be something much bigger that I could&#x27;ve ever imagined. In the <a href="https://blog.iggy.rs/posts/building-message-streaming-in-rust/" target="_blank" rel="noopener noreferrer">previous post</a> (from almost half a year ago), I did describe what&#x27;s <a href="https://github.com/apache/iggy" target="_blank" rel="noopener noreferrer">Iggy.rs</a> all about, how it started, what&#x27;s the ecosystem around it, what our goals are etc.</p>
<p>This <strong>particular article</strong> turned out to be a sort of <strong>catalyst</strong>, as it received a really nice traction on <a href="https://www.reddit.com/r/rust/comments/18tgubd/iggyrs_building_message_streaming_in_rust/" target="_blank" rel="noopener noreferrer">Reddit</a>, and was also mentioned on the main site of <a href="https://news.ycombinator.com/item?id=38868115" target="_blank" rel="noopener noreferrer">Hacker News</a>, which I do believe were the two main reasons for the growing interest &amp; community since then. At this point, I&#x27;d like to <strong>thank you all very much</strong> for such a kind feedback — honestly, during the very first weeks of 2024, there were so many things happening on our <a href="https://discord.gg/C5Sux5NcRa" target="_blank" rel="noopener noreferrer">Discord</a>, that with the rest of the team, we sometimes had a feeling as if we were providing enterprise premium support — really cool stuff!</p>
<p>And although it may seem as if the project development has recently slowed down a bit, I&#x27;d say it&#x27;s quite the opposite — let me quickly summary, what we&#x27;ve achieved so far during the last few months and what we&#x27;re focusing on now, as the future looks bright :)</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_stars-adb7a001298df7df97de6b0fdd6321ce.png" width="795" height="542" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">​</a></h2>
<p>First and foremost, if it weren&#x27;t for the community, we wouldn&#x27;t have seen such an enormous growth of the Iggy&#x27;s ecosystem — we&#x27;ve received the dozens of pull requests and there&#x27;s ~250 members on our <a href="https://discord.gg/C5Sux5NcRa" target="_blank" rel="noopener noreferrer">Discord</a>. Whether we talk about bug fixes, improvements, new features, or just sharing the experiences and discussing potential ideas — it&#x27;s all equally important.</p>
<p>And it&#x27;s been even more than that — we&#x27;ve seen our community members take on <strong>building the new SDKs</strong> in their favorite programming languages, fully on their own. Today, you can find the following list of supported SDKs for Iggy.rs — some of them could be lagging behind, but it&#x27;s expected, as the project is still evolving, and it&#x27;s not an easy task, to come up with a great development experience from the very beginning.</p>
<ul>
<li><a href="https://github.com/apache/iggy" target="_blank" rel="noopener noreferrer">Rust</a></li>
<li><a href="https://github.com/iggy-rs/iggy-dotnet-client" target="_blank" rel="noopener noreferrer">C#</a></li>
<li><a href="https://github.com/iggy-rs/iggy-cpp-client" target="_blank" rel="noopener noreferrer">C++</a></li>
<li><a href="https://github.com/iggy-rs/iggy-node-client" target="_blank" rel="noopener noreferrer">Node (TS)</a></li>
<li><a href="https://github.com/iggy-rs/iggy-go-client" target="_blank" rel="noopener noreferrer">Go</a></li>
<li><a href="https://github.com/iggy-rs/iggy-python-client" target="_blank" rel="noopener noreferrer">Python</a></li>
<li><a href="https://github.com/iggy-rs/iggy-java-client" target="_blank" rel="noopener noreferrer">Java</a></li>
<li><a href="https://github.com/iggy-rs/iggy-elixir-client" target="_blank" rel="noopener noreferrer">Elixir</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="changelog">Changelog<a href="#changelog" class="hash-link" aria-label="Direct link to Changelog" title="Direct link to Changelog">​</a></h2>
<p>Adding the brand new SDKs wasn&#x27;t the only great thing that has happened during last few months. We&#x27;ve also made quite a lot of improvements for the streaming server itself:</p>
<ul>
<li>Increased the streaming server throughput by over 30% for both writes and reads</li>
<li>Added messages compression for client-side &amp; server-side supporting the different algorithms</li>
<li>Implemented a new way of message batching with an additional tooling for data migration</li>
<li>Fixed the possible server-side deadlock that could happen for a specific configuration</li>
<li>Fixed issues with possible memory leaks when storing too many indices in memory</li>
<li>Rebuilt our custom benchmarking tool</li>
<li>Improved TCP connection handling</li>
<li>Constantly upgrading our CI/CD with lots of testing, different runtimes, artifacts, crates and Docker images releases</li>
<li>Refactored the existing Rust client SDK to follow the new conventions (without the breaking changes to the previous one)</li>
</ul>
<p>And at the same time, we&#x27;ve been experimenting a lot with some fancy stuff, which you can read about in the last paragraphs :)</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_perf-33fc4db2b6cbd7156b753eee6aeaba60.png" width="2117" height="367" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tooling">Tooling<a href="#tooling" class="hash-link" aria-label="Direct link to Tooling" title="Direct link to Tooling">​</a></h2>
<p>The core message streaming server and multiple SDKs might sound as the most important parts of the whole ecosystem, but let&#x27;s not forget about the <strong>management tools</strong>. How to quickly connect to the server, create new topics, validate if the messages are being sent correctly, change the user permissions or check the node statistics?</p>
<p>This is where our <strong><a href="https://github.com/apache/iggy/tree/master/core/cli" target="_blank" rel="noopener noreferrer">CLI</a> and <a href="https://github.com/iggy-rs/iggy-web-ui" target="_blank" rel="noopener noreferrer">Web UI</a> come in handy</strong>. If you&#x27;re a fan of working with the terminal and used to the great developer experience, you&#x27;ll find our CLI a joy to work with.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_cli-c140d5ecfddf24acd537722137b70c47.png" width="1743" height="766" class="img_ev3q"></p>
<p>On the other hand, if you prefer a graphical interface accessible via your browser, Web UI has got you covered. What&#x27;s even more impressive, is that both of these tools have been developed by the single developers.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_web-76023f316d53cc2e44ae6f7b83193529.png" width="2559" height="1353" class="img_ev3q"></p>
<p>Last but not least, in order to run the benchmarks, we have our own <a href="https://github.com/apache/iggy/tree/master/core/bench" target="_blank" rel="noopener noreferrer">bench</a> available as a part of the core repository — you can easily configure the number of producers, consumers, streams, etc. and get an overview of the possible streaming performance on your machine.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_bench-eed7510a845dfb053ac67be624599c99.png" width="1891" height="803" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="early-adopters">Early adopters<a href="#early-adopters" class="hash-link" aria-label="Direct link to Early adopters" title="Direct link to Early adopters">​</a></h2>
<p>Overall, coding and implementing new features is one side of the story, the other is making an actual use of it. You might have the most sophisticated/performant/reliable (you name it) tooling out there, however, if no one is using it or at least experimenting with it, how could you possibly know whether it&#x27;s even worth an effort to continue with the further development of the project? Well, I truly wish I had an easy answer how to find users willing to play with your new shiny toy.</p>
<p>In our case, I do believe, that it was a mix of two things — a limited amount of such tooling in the Rust ecosystem (so that the language enthusiasts could to try out something fresh), as well as a much more lightweight and (hopefully) performant message streaming infrastructure than some of the well-established solutions.</p>
<p>I&#x27;m fully aware that it&#x27;s a bold claim, and running the synthetic benchmarks is not a viable proof (e.g. on my 7950X, I was able to hit <strong>3GB/s writes and up to 10 GB/s reads</strong> with some additional caching enabled), yet, most of our early adopters were very happy with their results e.g. outnumbering Kafka while utilizing much less memory. For example, <a href="https://github.com/apache/iggy/issues/606" target="_blank" rel="noopener noreferrer">Marvin</a> wrote:</p>
<blockquote>
<p>20 million msg/sec via tcp is pretty nuts and already blows several commercial systems out of the water.</p>
</blockquote>
<p>And he&#x27;s not the only one who found Iggy.rs to be the right tool for his needs. For example, a few days ago, one of the users on our Discord said that thanks to Iggy he was able to <strong>achieve 2ms latency when compared to 300ms</strong> with Kafka. Again, just to make it clear, I&#x27;m not saying that we&#x27;re better than X or Y — I&#x27;m simply stating that for some specific usages, we might be a better choice than X or Y.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="clustering--replication">Clustering &amp; replication<a href="#clustering--replication" class="hash-link" aria-label="Direct link to Clustering &amp; replication" title="Direct link to Clustering &amp; replication">​</a></h2>
<p>One of the most frequent questions we receive is whether we plan to incorporate some sort of data replication feature. Without any doubts, especially when considering the general system resiliency and reliability, being able to spin up a cluster of the particular piece of infrastructure (database/messaging/streaming/logging etc.) is quite often a critical feature.</p>
<p>And yes, we will certainly implement clustering in Iggy — as a matter of fact, we&#x27;ve already built its basic version in the <a href="https://github.com/iggy-rs/iggy-cluster-sandbox" target="_blank" rel="noopener noreferrer">sandbox repository</a>. In order to achieve that, we&#x27;ve decided to (at least for now) stick to the <a href="https://raft.github.io" target="_blank" rel="noopener noreferrer">Raft</a> consensus algorithm. However, adding the data replication feature to the core Iggy project will require a new way of storing the server metadata (most likely in a way of event-sourced messages, to play nicely with the replication between the nodes) and one more &quot;tiny&quot; thing regarding the overall I/O.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_cluster-c2c33596763c8b9930c7de7e12dc3586.png" width="2552" height="1276" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="io_uring--thread-per-core--share-nothing">io_uring &amp; thread-per-core + share-nothing<a href="#io_uring--thread-per-core--share-nothing" class="hash-link" aria-label="Direct link to io_uring &amp; thread-per-core + share-nothing" title="Direct link to io_uring &amp; thread-per-core + share-nothing">​</a></h2>
<p>What is a message streaming server, besides some more-or-less complicated logic regarding topics, partitioning, message ordering, consumer groups and a few more features? In its very core, <strong>it&#x27;s mostly I/O (disk + networking)</strong> — the more efficient you can make it, the greater it will be. Of course, there&#x27;s a major difference between throughput and latency, especially when talking about the so-called tail latency (p99 and more). Wouldn&#x27;t it be great if we could have a very high throughput and very stable/predictable (and low) latency at the same time? This is exactly what we&#x27;re currently trying to achieve. Originally, we&#x27;ve started with the most popular Tokio runtime, which uses the work-stealing approach, and it&#x27;s actually quite impressive (based on the benchmarks and the experiences shared by our early adopters).</p>
<p>However, due to the nature of tasks being shared across the different threads, <strong>you can&#x27;t simply avoid lots of context switches and data being shared &amp; synchronized across these threads</strong> (therefore even more context switches will occur). While it&#x27;s probably not an issue for like 90% or maybe even 99% use-cases, there might be some (financial systems and similar), where an unpredictable tail latency is a total no-go.</p>
<p>Certainly, there are already existing solutions dealing with such challenges, such as <a href="https://aeron.io" target="_blank" rel="noopener noreferrer">Aeron</a>, but <strong>we do believe, that we can make Iggy something much easier to use</strong> — one that can handle the typical workloads, as well as the very demanding ones, without the need of getting a PhD in specific tooling :)</p>
<p>We&#x27;ve decided to <strong>experiment with <a href="https://unixism.net/loti/what_is_io_uring.html" target="_blank" rel="noopener noreferrer">io_uring</a> to maximize the I/O performance</strong> (and at the same time vastly reduce the need of context switches), and at the same time utilize <strong>thread-per-core architecture</strong>, where <strong>each thread is pinned to the CPU core</strong>, thus keeping the data locally, without the need of sharing it with the other threads (share-nothing). In order to achieve this, we&#x27;ve picked up <a href="https://github.com/bytedance/monoio" target="_blank" rel="noopener noreferrer">monoio</a> runtime, and have already managed (as a starting point for future integration) to fully rewrite existing Tokio runtime into monoio on <a href="https://github.com/apache/iggy/tree/io_uring_monoio_runtime" target="_blank" rel="noopener noreferrer">this branch</a>.</p>
<p>And just recently, we&#x27;ve established yet another <a href="https://github.com/iggy-rs/iggy-thread-per-core-sandbox" target="_blank" rel="noopener noreferrer">sandbox repository</a> to tackle the different challenges before deciding on the best solution possible and merging these changes into core Iggy streaming server.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_tpc-a6b43534112bfc2c863a2ef675c0a547.png" width="2298" height="1232" class="img_ev3q"></p>
<p>So far, we&#x27;ve got a very simple prototype in place, but there&#x27;s still lots to be done, especially when thinking of:</p>
<ul>
<li>How to evenly split partitions (the unit of data parallelism) between multiple cores?</li>
<li>How to efficiently rewrite existing server metadata heavily relying on synchronized data with <code>Arc&lt;&gt;</code> and <code>RwLock&lt;&gt;</code>?</li>
<li>Should we load into memory the same server metadata across all the threads (separately from each other) and notify all of them when something changes?</li>
<li>Should there be single or multiple threads handling the incoming TCP connections?</li>
<li>When <code>Thread #1</code> receives the request, which has to access the partition from <code>Thread #2</code>, should we use an async two-way channel (remember, no explicit locking and data synchronization between the threads) or maybe just send the descriptor using a one-way channel to the second thread to complete the request?</li>
<li>What and when could become a bottleneck in such architecture?</li>
</ul>
<p>This is just the tip of an iceberg, and we&#x27;ve already started <a href="https://penberg.org/papers/tpc-ancs19.pdf" target="_blank" rel="noopener noreferrer">studying</a> some of the existing solutions out there, including <a href="https://seastar.io" target="_blank" rel="noopener noreferrer">Seastar</a> framework. As you can see, this part has to be done before the clustering, as it involves lots of changes not only regarding the disk I/O, but also networking I/O.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="production-readiness">Production readiness<a href="#production-readiness" class="hash-link" aria-label="Direct link to Production readiness" title="Direct link to Production readiness">​</a></h2>
<p>Is it ready for production deployment? When you look at the versioning, Rust SDK is at 0.4.* and the server is currently at 0.2.*, which may look like a very long way from v1.0.</p>
<p>As mentioned before, <strong>some of our users already experiment with Iggy</strong> — and simply because of this, we haven&#x27;t really introduced any significant breaking changes (except one regarding data compression, which was handled by the provided data migration feature).</p>
<p>We can&#x27;t guarantee that it will always be like this, but at least for now, we do not see anything that would dramatically impact the existing solution. One of such things could be the <strong>redesigned storage, I/O, and clustering feature</strong> (as described in the previous paragraph), but even then, we&#x27;ll do our best to make it as seamless upgrade as possible — and once we achieve that, it means, we&#x27;re getting very close to the version 1.0.</p>
<p>For the time being, if you&#x27;re fine with a <strong>single-node solution that delivers a really good message streaming performance</strong>, give Iggy a try, or at least run the benchmarks to see what are its possibilities and please share your results and thoughts on our <a href="https://discord.gg/C5Sux5NcRa" target="_blank" rel="noopener noreferrer">Discord</a> — <strong>your opinion is really important to us and we respect it no matter what</strong>.</p>
<p>It&#x27;s been a very productive year for our core team (we&#x27;ve been and still are doing this in our free time), and once again, huge thanks to all our supporters and contributors!</p>
<p><strong>We&#x27;ve got the fundamentals right, now it&#x27;s high time to make Iggy blazingly fast!</strong></p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_rocket-24a27df28dafae43eb9634a4f6b00c5e.png" width="1920" height="1080" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blogs/2024/10/28/technology-radar-and-currrent-goals"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Iggy.rs - Technology Radar &amp; current goals</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blogs/2023/12/29/building-message-streaming-in-rust"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Iggy.rs - building message streaming in Rust</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#throwback" class="table-of-contents__link toc-highlight">Throwback</a></li><li><a href="#community" class="table-of-contents__link toc-highlight">Community</a></li><li><a href="#changelog" class="table-of-contents__link toc-highlight">Changelog</a></li><li><a href="#tooling" class="table-of-contents__link toc-highlight">Tooling</a></li><li><a href="#early-adopters" class="table-of-contents__link toc-highlight">Early adopters</a></li><li><a href="#clustering--replication" class="table-of-contents__link toc-highlight">Clustering &amp; replication</a></li><li><a href="#io_uring--thread-per-core--share-nothing" class="table-of-contents__link toc-highlight">io_uring &amp; thread-per-core + share-nothing</a></li><li><a href="#production-readiness" class="table-of-contents__link toc-highlight">Production readiness</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/apache-iggy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/C5Sux5NcRa" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/ApacheIggy" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://bsky.app/profile/iggy.rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bluesky<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blogs">Blogs</a></li><li class="footer__item"><a href="https://github.com/apache/iggy" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://benchmarks.iggy.rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Benchmarks<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div>Apache Iggy is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</div>
<div><br>
Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.</div>
<div><br>
Apache®, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.</div></div></div></div></footer></div>
</body>
</html>