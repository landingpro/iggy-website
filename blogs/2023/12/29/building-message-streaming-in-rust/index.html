<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Iggy.rs - building message streaming in Rust | Hyper-Efficient Message Streaming at Laser Speed.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://iggy.apache.org/img//apache-iggy-light-bg0.5x.png"><meta data-rh="true" name="twitter:image" content="https://iggy.apache.org/img//apache-iggy-light-bg0.5x.png"><meta data-rh="true" property="og:url" content="https://iggy.apache.org/blogs/2023/12/29/building-message-streaming-in-rust"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Iggy.rs - building message streaming in Rust | Hyper-Efficient Message Streaming at Laser Speed."><meta data-rh="true" name="description" content="Origins"><meta data-rh="true" property="og:description" content="Origins"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-12-29T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/spetz"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://iggy.apache.org/blogs/2023/12/29/building-message-streaming-in-rust"><link data-rh="true" rel="alternate" href="https://iggy.apache.org/blogs/2023/12/29/building-message-streaming-in-rust" hreflang="en"><link data-rh="true" rel="alternate" href="https://iggy.apache.org/blogs/2023/12/29/building-message-streaming-in-rust" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://iggy.apache.org/blogs/2023/12/29/building-message-streaming-in-rust","mainEntityOfPage":"https://iggy.apache.org/blogs/2023/12/29/building-message-streaming-in-rust","url":"https://iggy.apache.org/blogs/2023/12/29/building-message-streaming-in-rust","headline":"Iggy.rs - building message streaming in Rust","name":"Iggy.rs - building message streaming in Rust","description":"Origins","datePublished":"2023-12-29T00:00:00.000Z","author":{"@type":"Person","name":"Piotr Gankiewicz","description":"Apache Iggy founder","url":"https://github.com/spetz"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://iggy.apache.org/blogs","name":"Blogs"}}</script><link rel="alternate" type="application/rss+xml" href="/blogs/rss.xml" title="Hyper-Efficient Message Streaming at Laser Speed. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blogs/atom.xml" title="Hyper-Efficient Message Streaming at Laser Speed. Atom Feed"><link rel="stylesheet" href="/assets/css/styles.00ae354b.css">
<script src="/assets/js/runtime~main.e3e00cf3.js" defer="defer"></script>
<script src="/assets/js/main.c8167fb7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/apache-iggy0.5x.png"><link rel="preload" as="image" href="/img/apache-iggy-light-bg0.5x.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/apache-iggy0.5x.png" alt="Apache Iggy" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/apache-iggy-light-bg0.5x.png" alt="Apache Iggy" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blogs">Blogs</a><a class="navbar__item navbar__link" href="/downloads">Downloads</a><a href="https://benchmarks.iggy.rs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Benchmarks<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/C5Sux5NcRa" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://forms.gle/MAd1GjpPwCjwdEp58" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Feedback<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apache/iggy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub ⭐ 2.8K<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2025/06/06/connectors-runtime">Connectors runtime</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2025/05/08/zero-copy-deserialization">Zero-copy (de)serialization</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2025/02/17/transparent-benchmarks">Transparent Benchmarking with Apache Iggy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2025/02/10/apache-incubator">Iggy joins the Apache Incubator</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blogs/2024/10/28/technology-radar-and-currrent-goals">Iggy.rs - Technology Radar &amp; current goals</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Iggy.rs - building message streaming in Rust</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-12-29T00:00:00.000Z">December 29, 2023</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/spetz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Piotr Gankiewicz</span></a></div><small class="authorTitle_nd0D" title="Apache Iggy founder">Apache Iggy founder</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="origins">Origins<a href="#origins" class="hash-link" aria-label="Direct link to Origins" title="Direct link to Origins">​</a></h2>
<p>Over half a year ago (in April, to be exact), I eventually decided to learn Rust for good. My previous attempt during the <a href="https://github.com/spetz/advent-of-code-2022" target="_blank" rel="noopener noreferrer">2022 AoC</a> had failed rather quickly, after a few days of completing the exercises - I finally realized that <strong>I needed a real project to work on</strong>. For the last few years, I&#x27;ve been dealing with the different kinds of distributed systems (mostly using C#), including the typical microservices architecture or Web3. Regardless of their nature, some sort of the messaging between the independent components was always required. I had a chance to use the tools such as <a href="https://rabbitmq.com" target="_blank" rel="noopener noreferrer">RabbitMQ</a>, <a href="https://zeromq.org" target="_blank" rel="noopener noreferrer">ZeroMQ</a>, <a href="https://kafka.apache.org" target="_blank" rel="noopener noreferrer">Kafka</a> or <a href="https://aeron.io" target="_blank" rel="noopener noreferrer">Aeron</a> (just to name a few), as well as implementing the low-level peer-to-peer communication <a href="https://libp2p.io" target="_blank" rel="noopener noreferrer">protocols</a>.</p>
<p>After a few months of trying to figure out (or just staying in the limbo I guess), what would be the best project to work on, I decided to build the <strong>message streaming platform</strong> (keep in mind that streaming is <a href="https://blog.iron.io/message-queue-vs-streaming/" target="_blank" rel="noopener noreferrer">not the same</a> as regular message broker). The other reason (besides getting to know Rust) was to <strong>truly understand the internals of the messaging systems</strong> and the trade-offs that were made by their developers - some of them being the sole implication of the theory of distributed systems (ordering, consistency, partitioning etc.), while others the result of the implementation details (programming language, OS, hardware and so on).</p>
<p>And this is how the <a href="https://iggy.rs" target="_blank" rel="noopener noreferrer">Iggy.rs</a> was born. The name is an abbreviation of the Italian Greyhound (yes, I own <a href="https://www.instagram.com/fabio.and.cookie/" target="_blank" rel="noopener noreferrer">two of them</a>), small yet extremely fast dogs, the best in their class.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggys-5cd88b6e4af91d0e5b0f1ef688b8efac.jpeg" width="1506" height="1282" class="img_ev3q"></p>
<p>Therefore, what I want, or actually <strong>what we want</strong> (since there&#x27;s a few of us working on it already) for Iggy.rs to be - the best message streaming platform in its class. <strong>Lightweight</strong> in terms of the resource consumption, <strong>fast</strong> (and predictable) when it comes to the throughput and latency, and <strong>easy to use</strong> when speaking of its API, SDK and configuration of the project.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="project">Project<a href="#project" class="hash-link" aria-label="Direct link to Project" title="Direct link to Project">​</a></h2>
<p>At the very beginning, Iggy had rather limited functionality, and everything was handled using the <a href="https://www.chromium.org/quic/" target="_blank" rel="noopener noreferrer">QUIC</a> protocol based on <a href="https://github.com/quinn-rs/quinn" target="_blank" rel="noopener noreferrer">Quinn</a> library. You could connect multiple applications into the server, and start exchanging the messages between them, simply by appending the data to the stream (from the producer perspective), and fetching the records on the consumer side, by providing an offset (numeric value specifying from which element in the stream, you&#x27;d like to query the data) - that&#x27;s pretty much the very basics of how the message streaming platform works in terms of the underlying infrastructure.</p>
<p>After spending a few weeks on building the initial version, and then another few weeks on rewriting its core part (yes, prototyping + validation repeated in a continuous loop worked quite well), I managed to implement the persistent streaming server being capable of parallel writes/reads to/from independent streams supporting many distinct apps connected into it. Simply put, one could easily have many applications, and even <strong>thousands of the streams</strong> (depending on how do you decide to split your data between them e.g. one stream for user related events, another one for the payments events etc.) and start producing &amp; consuming the messages without interfering to each other.</p>
<p>On top of this, the support for <strong>TCP</strong> and <strong>HTTP</strong> protocols have been added. Under the hood, the typical architecture of streams, consisting of the topics being split into the partitions, which eventually operate on a raw file data using so-called segments has been implemented as well.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_sample-39395c20221652515f2296734851e042.jpeg" width="4064" height="2408" class="img_ev3q"></p>
<p><strong>It was one of the &quot;aha&quot; moments</strong>, when reimplementing the parallel access to the data with the usage of underlying synchronization mechanism (<em>RwLock</em> etc.), optimized data structures e.g. for dealing with <a href="https://crates.io/crates/bytes" target="_blank" rel="noopener noreferrer">bytes</a>, along with the <a href="https://tokio.rs" target="_blank" rel="noopener noreferrer">Tokio</a> <strong>work stealing</strong> approach, yielded the great improvements for the overall throughput.</p>
<p>I do believe, that somewhere at this point I had realized, that <strong>Iggy might actually become something useful</strong> - not just a toy project, to be abandoned after reaching its initial goal (which was sort of already achieved).</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> polled_messages </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">poll_messages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token class-name">PollMessages</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  stream_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Identifier</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">numeric</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  topic_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Identifier</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">named</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;orders&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  consumer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Consumer</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">group</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Identifier</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">named</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;payments&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  partition_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PollingStrategy</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">offset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  auto_commit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">await</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After running some benchmarks (yes, we have a dedicated app for the <strong><a href="https://github.com/apache/iggy/tree/master/core/bench" target="_blank" rel="noopener noreferrer">benchmarking purposes</a></strong>) and seeing the promising numbers (<strong>range of 2-6 GB/s for both, writes &amp; reads when processing millions of messages</strong>), I eventually decided to give it a long-term shot. Being fully aware that there&#x27;s still lots to be done (speaking of many months, or even years), I couldn&#x27;t be more happy to find out that there&#x27;s also someone else out there, who would like to contribute to the project and become a part of the team.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_bench-9ea0ebbd13ad66abb94ec3d8d8697048.jpeg" width="3494" height="1750" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="team">Team<a href="#team" class="hash-link" aria-label="Direct link to Team" title="Direct link to Team">​</a></h2>
<p>At the time of writing this post, <strong>Iggy consists of around 10 members</strong> contributing to its different parts. Some of us do work on the core streaming server, while the other ones are focused on SDKs for the different programming languages or tooling such as Web UI or CLI - all these projects are equally important, as they add up to the overall ecosystem. But how do you actually gather a team of open source contributors, who are willing to spend their free time working on it?</p>
<p>Well, I wish I had an answer to that question - honestly, in case of Iggy I wasn&#x27;t actually looking for anyone, as I didn&#x27;t think this could be an interesting project to work on (except for myself). Then how did that happen anyway? There were only 2 things in common - all the people that joined the project were part of the same Discord communities, yet more importantly <strong>they all shared the passion for programming</strong>, and I&#x27;m not talking about Rust language specifically. From junior to senior, from embedded to front-end developers - regardless of the years of experience and current occupation, everyone has found a way to implement something meaningful.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_server-b28372292592869008ceb03c1edfdc51.jpeg" width="4088" height="1610" class="img_ev3q"></p>
<p>For example, when I asked one guy what was the reason behind building an SDK in Go, the reply was the need of playing with and learning a new language. Why C# SDK? Well, the other guy wanted to dive more into the low-level concepts and decided to squeeze out great performance from the managed runtime. Why build Web UI in Svelte? At work, I mostly use React, and I wanted to learn a new framework - another member said.</p>
<p>My point is - as long as you believe in what you&#x27;re building, and you&#x27;re consistent about it (it was one of the main reasons why I&#x27;ve been contributing to Iggy every day since its inception, and still doing so), there&#x27;s a chance that someone out there will notice it and happily join you in your efforts. <strong>Lead by example, or whatever you call it.</strong></p>
<p>At the same time, we&#x27;ve started receiving the first, <strong>external contributions from all around the world</strong> - whether talking about simpler tasks, or the more sophisticated ones, requiring significant amount of time being spent on both, the implementation and the discussions to eventually deliver the code.</p>
<p>It gave us even more confidence, that there are other people (outside our internal bubble), who find this project to be interesting and worth spending their time. And without all these amazing contributors, it&#x27;d be much harder (or even impossible) to deliver so many features.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h2>
<p>At first, let me just point out some of the properties and features that are part of the core streaming server:</p>
<ul>
<li><strong>Highly performant</strong>, persistent append-only log for the message streaming</li>
<li><strong>Very high throughput</strong> for both writes and reads</li>
<li><strong>Low latency and predictable resource usage</strong> thanks to the Rust compiled language (no GC)</li>
<li><strong>Users authentication and authorization</strong> with granular permissions and PAT (Personal Access Tokens)</li>
<li>Support for multiple streams, topics and partitions</li>
<li>Support for <strong>multiple transport protocols</strong> (QUIC, TCP, HTTP)</li>
<li>Fully operational RESTful API which can be optionally enabled</li>
<li>Available client SDK in multiple languages</li>
<li><strong>Works directly with the binary data</strong> (lack of enforced schema and serialization/deserialization)</li>
<li>Configurable server features (e.g. caching, segment size, data flush interval, transport protocols etc.)</li>
<li>Possibility of storing the <strong>consumer offsets</strong> on the server</li>
<li>Multiple ways of polling the messages:<!-- -->
<ul>
<li>By offset (using the indexes)</li>
<li>By timestamp (using the time indexes)</li>
<li>First/Last N messages</li>
<li>Next N messages for the specific consumer</li>
</ul>
</li>
<li>Possibility of <strong>auto committing the offset</strong> (e.g. to achieve <em>at-most-once</em> delivery)</li>
<li><strong>Consumer groups</strong> providing the message ordering and horizontal scaling across the connected clients</li>
<li><strong>Message expiry</strong> with auto deletion based on the configurable <strong>retention policy</strong></li>
<li>Additional features such as <strong>server side message deduplication</strong></li>
<li><strong>TLS</strong> support for all transport protocols (TCP, QUIC, HTTPS)</li>
<li>Optional server-side as well as client-side <strong>data encryption</strong> using AES-256-GCM</li>
<li>Optional metadata support in the form of <strong>message headers</strong></li>
<li>Built-in <strong>CLI</strong> to manage the streaming server</li>
<li>Built-in <strong>benchmarking app</strong> to test the performance</li>
<li><strong>Single binary deployment</strong> (no external dependencies)</li>
<li>Running as a single node (no cluster support yet)</li>
</ul>
<p>And as already mentioned, we&#x27;ve been working on SDKs for the multiple programming languages:</p>
<ul>
<li><a href="https://crates.io/crates/iggy" target="_blank" rel="noopener noreferrer">Rust</a></li>
<li><a href="https://github.com/iggy-rs/iggy-dotnet-client" target="_blank" rel="noopener noreferrer">C#</a></li>
<li><a href="https://github.com/iggy-rs/iggy-go-client" target="_blank" rel="noopener noreferrer">Go</a></li>
<li><a href="https://github.com/iggy-rs/iggy-node-client" target="_blank" rel="noopener noreferrer">Node</a></li>
<li><a href="https://github.com/iggy-rs/iggy-python-client" target="_blank" rel="noopener noreferrer">Python</a></li>
<li><a href="https://github.com/iggy-rs/iggy-java-client" target="_blank" rel="noopener noreferrer">Java</a></li>
</ul>
<p>Please keep in mind, though, that some of them e.g. for Rust or C# are more up to date with the recent server changes, while the other ones might still need to do some catching up with the latest features. However, given the amount of available methods on the server&#x27;s API and the underlying TCP/UDP stack with custom serialization to be implemented from the scratch (except for HTTP transport, that&#x27;s the easier one), I&#x27;d say we&#x27;re doing quite ok, and I can&#x27;t stress enough <strong>how grateful I am to all the contributors for their huge amount of work</strong>!</p>
<p>But wait, there&#x27;s even more - what would be a message streaming platform without some additional tooling for managing it? We&#x27;ve also been developing the <strong><a href="https://github.com/apache/iggy/tree/master/cmd" target="_blank" rel="noopener noreferrer">CLI</a></strong>.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_cli-efc853d35dfcddfb68957f9f7cbdd745.jpeg" width="2942" height="2162" class="img_ev3q"></p>
<p>As well as modern <strong><a href="https://github.com/iggy-rs/iggy-web-ui" target="_blank" rel="noopener noreferrer">Web UI</a></strong> to make it happen :)</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_web_ui-58fc54e40a2756eba04dec9206de70a5.jpeg" width="4060" height="2408" class="img_ev3q"></p>
<p>Last but not least, we&#x27;ve got a fully-featured <a href="https://github.com/apache/iggy/actions" target="_blank" rel="noopener noreferrer">CI/CD pipeline</a> responsible for running all the checks and tests on multiple platforms, and finally producing the release artifacts and <a href="https://hub.docker.com/u/iggyrs" target="_blank" rel="noopener noreferrer">Docker images</a>.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/iggy_ci_cd-a03f984dde69dbbc209f61481d7d1c91.jpeg" width="2000" height="1000" class="img_ev3q"></p>
<p>At first glance, it might look like there&#x27;s plenty of features already in place, but for anyone who has ever worked with the message streaming infrastructure before, that might be just a tip of an iceberg, thus let&#x27;s discuss the roadmap.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">​</a></h2>
<p>After gaining some traction a few months ago (mostly due to landing on the GitHub trending page in July), we&#x27;ve talked to some users potentially interested in making Iggy part of their infrastructure (there&#x27;s even one <a href="https://neferdata.com" target="_blank" rel="noopener noreferrer">company</a> using it already), and discussed what features would be a good addition to the current stack.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/gh_trending-bbecb9e6ddc18e345fbdb7c8bae838d9.jpeg" width="2234" height="1830" class="img_ev3q"></p>
<p>Considering what&#x27;s already there, being worked on or planned for the future releases, such as interactive CLI, modern Web UI, optional data compression and archivization, plugin support or multiple SDKs, there are at least three additional challenges to overcome:</p>
<p><strong>Clustering</strong> - the possibility of having a <strong>highly available and fault tolerant</strong> distributed message streaming platform in a production environment, is typically one of the most important aspects when considering the particular tool. While it wouldn&#x27;t be too difficult to implement the extension (think of a simple proxy/load balancer), allowing to monitor and deliver the data either to the primary or secondary replica (treated as a fallback server) and switch between them when one of the nodes goes down, such a solution would still result in SPOF and wouldn&#x27;t really scale. Instead, we&#x27;ve started experimenting with <a href="https://raft.github.io/" target="_blank" rel="noopener noreferrer">Raft</a> consensus mechanism (de facto the industry standard) in a dedicated <a href="https://github.com/iggy-rs/iggy-cluster-sandbox" target="_blank" rel="noopener noreferrer">repository</a>, which should allow us in delivering the truly fault tolerant, distributed infrastructure with an additional data replication at the partition level (so-called unit of parallelization).</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/leader_elections-f973c06ac3c6b230945e496faa6f314e.jpeg" width="4058" height="2316" class="img_ev3q"></p>
<p><strong>Low-level I/O</strong> - although the current results (based on the benchmarking tool measuring the throughput etc.) are satisfying, we strongly believe that there&#x27;s still (potentially a huge) room for improvement. We&#x27;re planning to use <strong><a href="https://unixism.net/loti/what_is_io_uring.html" target="_blank" rel="noopener noreferrer">io_uring</a></strong> for all I/O operations (disk or network related). The brand new, completion based API (available in the recent Linux kernels) shows a significant boost when compared to the existing solutions such as <strong>epoll</strong> or <strong>kqueue</strong> - at the end of the day, the streaming server at its core is all about writing &amp; reading data to/from disk and sending it via the network buffer. We&#x27;ve decided to give a try <strong><a href="https://github.com/bytedance/monoio" target="_blank" rel="noopener noreferrer">monoio</a></strong> runtime, as it seems to be the most performant one. Going further, we&#x27;d like to incorporate techniques such as <strong>zero-copy</strong>, <strong>kernel bypass</strong> and all the other goodies e.g. from <strong><a href="https://www.dpdk.org/" target="_blank" rel="noopener noreferrer">DPDK</a></strong> or other relevant frameworks.</p>
<p><strong>Thread-per-core</strong> - in order to avoid the rather costly context switches due to the usage of synchronization mechanism when accessing the data from the different threads (e.g. via Tokio&#x27;s work stealing mechanism), we&#x27;re planning to explore (or actually, already doing it, in the previously mentioned repository for clustering sandbox) thread-per-core architecture, once again, delivered as part of <strong><a href="https://github.com/bytedance/monoio" target="_blank" rel="noopener noreferrer">monoio</a></strong> runtime. The overall idea can be described in two words - <strong>share nothing</strong> (or as little as possible). For example, the streams could be tied to the particular CPU cores, resulting in <strong>no additional overhead</strong> (via <em>Mutexes</em>, <em>RwLocks</em> etc.) when writing or reading the data. As good as it might sound, there are always some tradeoffs - what if some specific streams are more frequently accessed than the others? Would the remaining cores remain idle instead of doing something useful? On the other hand, tools such as <a href="https://www.scylladb.com/product/technology/shard-per-core-architecture/" target="_blank" rel="noopener noreferrer">ScyllaDB</a> or <a href="https://redpanda.com/blog/tpc-buffers" target="_blank" rel="noopener noreferrer">Redpanda</a> seem to be leveraging this model quite effectively (both are using the same <a href="https://seastar.io/" target="_blank" rel="noopener noreferrer">Seastar</a> framework). We will be looking for the answers, before deciding which approach (thread-per-core or work stealing) suits Iggy better in the future.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future">Future<a href="#future" class="hash-link" aria-label="Direct link to Future" title="Direct link to Future">​</a></h2>
<p><strong>Why building another message streaming then?</strong> A few months ago, I would probably answer - strictly for fun. Yet, after exploring more in-depth the status quo, what we would like to achieve is sort of twofold - on one hand, it&#x27;d be great to deliver the general-purpose tool, such as Kafka. On the other hand, why not to try and really push hard the OS and hardware to its limits when speaking of the performance, reliability, throughput and latency, something what e.g. Aeron does? And what if we could <strong>put this all together</strong> into the easy-to-use, unified platform, supporting the most popular programming languages, with the addition of modern CLI and Web UI for managing it?</p>
<p>Only the time will tell, but <strong>we&#x27;re already excited enough to challenge ourselves</strong>. We&#x27;d love to hear your thoughts, ideas and <strong>feedback</strong> - anything that will help us in building the best message streaming platform in Rust that you will enjoy using! Feel free to join our <a href="https://discord.gg/C5Sux5NcRa" target="_blank" rel="noopener noreferrer">Discord</a> community and let us know what do you think :)</p>
<p>P.S.</p>
<p>This blog uses <a href="https://www.getzola.org/" target="_blank" rel="noopener noreferrer">Rust</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blogs/2024/05/29/one-year-of-building-the-message-streaming"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Iggy.rs — one year of building the message streaming</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blogs/iggy-0-1-0-release"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Iggy 0.1.0 release</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#origins" class="table-of-contents__link toc-highlight">Origins</a></li><li><a href="#project" class="table-of-contents__link toc-highlight">Project</a></li><li><a href="#team" class="table-of-contents__link toc-highlight">Team</a></li><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#roadmap" class="table-of-contents__link toc-highlight">Roadmap</a></li><li><a href="#future" class="table-of-contents__link toc-highlight">Future</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/apache-iggy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/C5Sux5NcRa" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/ApacheIggy" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://bsky.app/profile/iggy.rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bluesky<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blogs">Blogs</a></li><li class="footer__item"><a href="https://github.com/apache/iggy" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://benchmarks.iggy.rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Benchmarks<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div>Apache Iggy is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</div>
<div><br>
Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.</div>
<div><br>
Apache®, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.</div></div></div></div></footer></div>
</body>
</html>